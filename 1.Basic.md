**作者： AvatarWorks Lab** --  _iker Peng_

- **1. 理解动画数据**

在骨骼动画当中，Animation data（即：我们使用的.skeleton文件）是一个动画动作（motion）在某一时刻（时间点time index）的骨架的位置信息和旋转信息的数据的集合。一个时间点的动画为一帧，多个关键帧位置的动画信息就组成一个动画。

![](/assets/Animation/Animation tips/Screen Shot 2016-08-22 at 5.05.39 PM.png)

对于每一个Skeleton，是一个具有层级关系的骨骼（Bone）数据的集合。最上层的是这个骨架整体的根，称作是Root，其余的骨架按照层级关系挂载在它上面。

![](/assets/Animation/Animation tips/Screen Shot 2016-08-22 at 5.06.49 PM.png)

层级关系：

![](/assets/Animation/Animation tips/Screen Shot 2016-08-22 at 5.06.14 PM.png)

对于小我的数据，其中的根是： hips，然后hips1 是他的子节点，其余的节点按照层级关系挂载在hips1上面，所以一般的操作是对hips1的操作。

对于一个.skeleton文件，也就是一个动画文件，其中包含的数据为这个 骨架的各个关节点（bone）在各个时间点（关键帧）的位置以及旋转的信息的集合。一个动画文件中关键帧越多表现的就越精细。 

- ** 2. 动画数据当中的四元数**

动画当中的数据主要包括position和rotation信息。position简单的用(x,y,z)就可以表示，用X，Z轴表示水平的面，Y表示垂直的轴。正如你看屏幕一样，X轴表示你的屏幕的左，右，右面是X轴正方向。Y轴表示你的屏幕的下到上，上面是Y轴正方向。Z轴表示你的屏幕的由里到外，外面是Z轴正方向。但是rotation一般采用四元数来表示。最容易想到的定角表达方式存在很多的问题，例如不同轴旋转的堆叠，或者是万向节死锁的问题。因此一般使用四元数表示。

****$$q=[w，v]=[w ，(x,y,z)]$$****

四元数可以进行插值运算，其中 w为标量，v表示为向量。简单的理解就是，绕着这个向量v旋转w角度到达的状态。在动画当中使用四元数是因为它可以直接进行插值。

绕轴n旋转θ角：$$\vec{n}$$是一个向量，根据左手或右手法则定义旋转的正方向， θ角表示旋转的量。那么表示这个旋转的四元数为：

$$q=[cos(\theta/2),sin(\theta/2)\vec{n}]$$

- **3. 动画当中的时间概念**

如上面所说，Animation是一段动画在某个时间节点的一组骨骼姿态信息，因此时间对于一段Animation 来讲很重要。除此以外，在一些Example-based 的算法当中会引入一些的Example，这里面也存在一些时间的概念，如T0， T1，T2, T3. 这里的时间概念却是为了标定各个动作的节点，以及对各个动作阶段进行融合。例如这个配置文件：

![](/assets/Animation/QQ20160812-0.png)

图 . Reach的配置文件截图

其中的时间节点表示这个reach的动作，包括准备，伸手，抓到，收回的这几个动作的阶段，分别对应于T0，T1，T2，T3这几个时间点。
